@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/navbar/_Layout.cshtml";
}
<table id="example" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>Piece</th>
            <th>Categorie</th>
            <th>Id vendeur</th>
            <th>prix</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var p in Model)
        {
            <tr>
                <td>@p.Nom_piece</td>
                <td>@p.Type_name</td>
                <td>@p.Id_Vendeur</td>
                <td>@p.prix</td>
                <td><a id="ve" data-id="@p.Id_piece" data-url="/Piece/Verifier_Piece" >Verifier</a></td>
            </tr>
        }
       
       </tbody>
</table>

<script>
    $(document).ready(function () {
        $('#ve').click(function () {
            var pieceId = $(this).data('id');
            var url = $(this).data('url');
            $.ajax({
                url: url,
                type: 'GET',
                data: {
                    id: pieceId,

                },
                success: function (response) {
                    if (response.success) {
                        alert('Pièce est modifie par succee!');
                        location.reload();
                    } else if (response.redirectUrl) {
                        window.location.href = response.redirectUrl;
                    } else {
                        alert('Erreur.');
                    }
                },
                error: function () {
                    alert('Erreur de communication avec le serveur.');
                }
            });
        });
    });
</script>